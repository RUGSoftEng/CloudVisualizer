var nrInstances,days,hours,storageSize,DBSize,calculate;$(document).ready(function(){$("#myAccordion").accordion(),$(".source li").draggable({helper:"clone"}),$("#canvas").droppable({drop:function(e,n){$("#items").append($("<li></li>").text(n.draggable.text()).on("click",function(){$(this).remove()}))}})});var VirtualMachines=[],Databases=[],Storages=[];function newObjectExists(e,n){for(var t=Object.getOwnPropertyNames(e),a=0;a<n.length;a++){var o=!1,s=Object.getOwnPropertyNames(n[a]);t.length!=s.length&&(o=!0);for(var r=0;a<t.length;r++){var c=t[r];if("nrInstances"==c)break;if(e[c]!==n[a][c]&&(o=!0),o)break}if(!o)return a}return-1}function createBasicVirtualMachine(e,n,t){var a=new VirtualMachine;return a.nrInstances=e,a.days=n,a.hours=t,a.instanceType=determineInstanceType(a.type),a}function createBasicDatabase(e){var n=new Database;return n.dataSize=e,n}function createBasicStorage(e){var n=new Storage;return n.multiRegional=e,n}function addVirtualMachine(e){var n=newObjectExists(e,VirtualMachines);-1!=n?(console.log("EXISTS"),incrementNrInstances(n,e.nrInstances,VirtualMachines),changeHTML(n,VirtualMachines,"vm")):(console.log("New virtual machine!"),VirtualMachines.push(e),addHTML(VirtualMachines.length-1,e.nrInstances,"vm"))}function addDatabase(e){var n=newObjectExists(e,Databases);-1!=n?(console.log("EXISTS"),incrementNrInstances(n,e.nrInstances,Databases),changeHTML(n,Databases,"db")):(console.log("New database!"),Databases.push(e),addHTML(Databases.length-1,e.nrInstances,"db"))}function addStorage(e){var n=newObjectExists(e,Storages);-1!=n?(console.log("EXISTS"),incrementNrInstances(n,e.nrInstances,Storages),changeHTML(n,Storages,"cs")):(console.log("New storage!"),Storages.push(e),addHTML(Storages.length-1,e.nrInstances,"cs"))}function addHTML(e,n,t){var a="<div id='"+t+"_"+e+"' class='icons'><img src='images/"+t+".png'><p>"+n+"</p> <a href='#' onclick='removeIcon(\"#"+t+"_"+e+"\");'>x</a></div>";$("#items").append(a)}function changeHTML(e,n,t){var a=n[e];$("#"+t+"_"+e+" p").text(a.nrInstances)}function incrementNrInstances(e,n,t){var a=t[e];a.nrInstances=a.nrInstances+n}function allowDrop(e){e.preventDefault()}function dragDatabase(e){jQuery.event.props.push("dataTransfer");var n=createBasicDatabase(parseInt(DBSize.innerHTML));console.log(n);var t=JSON.stringify(n);e.dataTransfer.setData("foo",t)}function dragStorage(e){jQuery.event.props.push("dataTransfer");var n=createBasicStorage(parseInt(storageSize.innerHTML)),t=JSON.stringify(n);e.dataTransfer.setData("foo",t)}function dragVM(e){jQuery.event.props.push("dataTransfer");var n=createBasicVirtualMachine(parseInt(nrInstances.innerHTML),parseInt(days.innerHTML),parseInt(hours.innerHTML)),t=JSON.stringify(n);e.dataTransfer.setData("foo",t)}function drop(e){console.log("jim"),e.preventDefault();var n=JSON.parse(e.dataTransfer.getData("foo"));"VirtualMachine"===n.objectName&&addVirtualMachine(n),"Database"===n.objectName&&(console.log(n.objectName),addDatabase(n)),"Storage"===n.objectName&&(console.log(n.objectName),addStorage(n)),console.log(n)}function refresh(){for(var e in clearBox("items"),VirtualMachines){VirtualMachines[e];$("#items").append($('<div class="test"></div>').html('<img src="images/VM.png">')),console.log(e.hours)}}function clearBox(e){document.getElementById(e).innerHTML=""}function removeIcon(e){$(e).remove()}function calculate(){console.log("Calculate button pressed..","sending AJAX request to cloudwatch");$.ajax({type:"POST",url:"/cloudwatch",contentType:"html/text",data:{service:"google-cloud"},success:function(e){e}}).done(function(){console.log("Finished processing response of AJAX request to cloudwatch");var e=0,n="";for(var t in VirtualMachines){var a=VirtualMachines[t].costMonthly()*VirtualMachines[t].nrInstances;e+=a,n+="\nVirtual machine "+t+"     "+Math.round(100*a)/100}console.log(n+"\nTotal                          "+Math.round(100*e)/100)})}function Calculate(){var e=document.getElementById("canvas-pop-up");(e.style.display="none")&&(e.style.display="block")}function scrollFunction(){20<document.body.scrollTop||20<document.documentElement.scrollTop?document.getElementById("top").style.display="block":document.getElementById("top").style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}$(function(){$("#myAccordion").accordion();var e=document.getElementById("VMInstancesSliderID");(nrInstances=document.getElementById("VMInstances")).innerHTML=e.value,e.oninput=function(){nrInstances.innerHTML=this.value};var n=document.getElementById("VMDaysSliderID");(days=document.getElementById("VMDays")).innerHTML=n.value,n.oninput=function(){days.innerHTML=this.value};var t=document.getElementById("VMHoursSliderID");(hours=document.getElementById("VMHours")).innerHTML=t.value,t.oninput=function(){hours.innerHTML=this.value};var a=document.getElementById("StorageGBSliderID");(storageSize=document.getElementById("StorageGB")).innerHTML=a.value,a.oninput=function(){storageSize.innerHTML=this.value,console.log(storageSize)};var o=document.getElementById("DBGBSliderID");(DBSize=document.getElementById("DBGB")).innerHTML=o.value,o.oninput=function(){DBSize.innerHTML=this.value};var s=document.getElementById("myModal"),r=document.getElementById("provider"),c=document.getElementById("save-modal"),i=document.getElementsByClassName("close")[0];r.onclick=function(){s.style.display="block"},c.onclick=function(){s.style.display="none"},i.onclick=function(){s.style.display="none"},window.onclick=function(e){e.target==s&&(s.style.display="none")}}),window.onscroll=function(){scrollFunction()};