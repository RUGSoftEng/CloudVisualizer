var nrInstances,days,hours,calculate,VirtualMachines=[],Databases=[],Storages=[];function newObjectExists(e,n){for(var a=Object.getOwnPropertyNames(e),t=0;t<n.length;t++){var r=!1,s=Object.getOwnPropertyNames(n[t]);a.length!=s.length&&(r=!0);for(var c=0;t<a.length;c++){var o=a[c];if("nrInstances"==o)break;if(e[o]!==n[t][o]&&(r=!0),r)break}if(!r)return t}return-1}function createBasicVirtualMachine(e,n,a){var t=new VirtualMachine;return t.nrInstances=e,t.days=n,t.hours=a,t.instanceType=determineInstanceType(t.type),t}function createBasicDatabase(e){var n=new Database;return n.dataSize=e,n}function createBasicStorage(e){(new Storage).multiRegional=e}function addVirtualMachine(e){var n=newObjectExists(e,VirtualMachines);-1!=n?(console.log("EXISTS"),incrementVM(n,e.nrInstances),changeVMHTML(n)):(console.log("New virtual machine!"),VirtualMachines.push(e),addVMHtml(VirtualMachines.length-1,"VM.png",e.nrInstances))}function addVMHtml(e,n,a){var t="<div id='vm_"+e+"' class='icons'><img src='images/"+n+"'><p>"+a+"</p> <a href='#' onclick='removeIcon(\"#vm_"+e+"\");'>x</a></div>";$("#items").append(t)}function changeVMHTML(e){var n=VirtualMachines[e];$("#vm_"+e+" p").text(n.nrInstances)}function changeDBHTML(e){var n=Databases[e];$("#vm_"+e+" p").text(n.nrInstances)}function incrementVM(e,n){var a=VirtualMachines[e];a.nrInstances=a.nrInstances+n}function incrementDB(e,n){var a=Databases[e];a.nrInstances=a.nrInstances+n}function addDatabase(e){var n=newObjectExists(e,Databases);-1!=n?(console.log("EXISTS"),incrementDB(n,newVM.nrInstances),changeDBHTML(n)):(console.log("New database!"),Databases.push(e),addVMHtml(VirtualMachines.length-1,"VM.png",newVM.nrInstances))}function addDatabase(e){newObjectExists(e,Databases)?console.log("EXISTS"):(console.log("New database!"),VirtualMachines.push(e))}function addStorage(e){newObjectExists(e,Storages)?console.log("EXISTS"):(console.log("New storage!"),VirtualMachines.push(e))}function allowDrop(e){e.preventDefault()}function dragDatabase(e){jQuery.event.props.push("dataTransfer");var n=createBasicDatabase(parseInt(dataSize.innerHTML)),a=JSON.stringify(n);e.dataTransfer.setData("foo",a)}function dragStorage(e){jQuery.event.props.push("dataTransfer"),e.dataTransfer.setData("text","Luc is super cool")}function dragVM(e){jQuery.event.props.push("dataTransfer");var n=createBasicVirtualMachine(parseInt(nrInstances.innerHTML),parseInt(days.innerHTML),parseInt(hours.innerHTML)),a=JSON.stringify(n);e.dataTransfer.setData("foo",a)}function drop(e){e.preventDefault();var n=JSON.parse(e.dataTransfer.getData("foo"));"VirtualMachine"===n.objectName&&addVirtualMachine(n),"Database"===n.objectName&&(console.log(n.objectName),addDatabase(n)),console.log(n)}function refresh(){for(var e in clearBox("items"),VirtualMachines){VirtualMachines[e];$("#items").append($('<div class="test"></div>').html('<img src="images/VM.png">')),console.log(e.hours)}}function clearBox(e){document.getElementById(e).innerHTML=""}function removeIcon(e){$(e).remove()}function calculate(){console.log("Calculate button pressed..","sending AJAX request to cloudwatch");$.ajax({type:"GET",url:"/cloudwatch",contentType:"html/text",data:{service:"google-cloud"},success:function(e){e}}).done(function(){console.log("Finished processing response of AJAX request to cloudwatch"),console.log("calculating price...");var e=[],n=0;for(var a in VirtualMachines)e.push(VirtualMachines[a].costMonthly()*VirtualMachines[a].nrInstances),n+=VirtualMachines[a].costMonthly()*VirtualMachines[a].nrInstances;var t="";for(var a in e)t=t+"\nVirtual machine "+a+"     "+Math.round(100*e[a])/100;alert(t+"\nTotal                          "+Math.round(100*n)/100)})}$(document).ready(function(){$("#myAccordion").accordion()}),$(function(){var e=document.getElementById("VMInstancesSliderID");(nrInstances=document.getElementById("VMInstances")).innerHTML=e.value,e.oninput=function(){nrInstances.innerHTML=this.value};var n=document.getElementById("VMDaysSliderID");(days=document.getElementById("VMDays")).innerHTML=n.value,n.oninput=function(){days.innerHTML=this.value};var a=document.getElementById("VMHoursSliderID");(hours=document.getElementById("VMHours")).innerHTML=a.value,a.oninput=function(){hours.innerHTML=this.value};var t=document.getElementById("StorageGBSliderID"),r=document.getElementById("StorageGB");r.innerHTML=t.value,t.oninput=function(){r.innerHTML=this.value};var s=document.getElementById("DBGBSliderID"),c=document.getElementById("DBGB");c.innerHTML=s.value,s.oninput=function(){c.innerHTML=this.value}});