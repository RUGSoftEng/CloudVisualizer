var nrInstances,days,hours,storageSize,DBSize,calculate,VirtualMachines=[],Databases=[],Storages=[];function newObjectExists(e,n){for(var a=Object.getOwnPropertyNames(e),t=0;t<n.length;t++){var r=!1,s=Object.getOwnPropertyNames(n[t]);a.length!=s.length&&(r=!0);for(var o=0;t<a.length;o++){var c=a[o];if("nrInstances"==c)break;if(e[c]!==n[t][c]&&(r=!0),r)break}if(!r)return t}return-1}function createBasicVirtualMachine(e,n,a){var t=new VirtualMachine;return t.nrInstances=e,t.days=n,t.hours=a,t.instanceType=determineInstanceType(t.type),t}function createBasicDatabase(e){var n=new Database;return n.dataSize=e,n}function createBasicStorage(e){var n=new Storage;return n.multiRegional=e,n}function addVirtualMachine(e){var n=newObjectExists(e,VirtualMachines);-1!=n?(console.log("EXISTS"),incrementNrInstances(n,e.nrInstances,VirtualMachines),changeHTML(n,VirtualMachines,"vm")):(console.log("New virtual machine!"),VirtualMachines.push(e),addHTML(VirtualMachines.length-1,e.nrInstances,"vm"))}function addDatabase(e){var n=newObjectExists(e,Databases);-1!=n?(console.log("EXISTS"),incrementNrInstances(n,e.nrInstances,Databases),changeHTML(n,Databases,"db")):(console.log("New database!"),Databases.push(e),addHTML(Databases.length-1,e.nrInstances,"db"))}function addStorage(e){var n=newObjectExists(e,Storages);-1!=n?(console.log("EXISTS"),incrementNrInstances(n,e.nrInstances,Storages),changeHTML(n,Storages,"cs")):(console.log("New storage!"),Storages.push(e),addHTML(Storages.length-1,e.nrInstances,"cs"))}function addHTML(e,n,a){var t="<div id='"+a+"_"+e+"' class='icons'><img src='images/"+a+".png'><p>"+n+"</p> <a href='#' onclick='removeIcon(\"#"+a+"_"+e+"\");'>x</a></div>";$("#items").append(t)}function changeHTML(e,n,a){var t=n[e];$("#"+a+"_"+e+" p").text(t.nrInstances)}function incrementNrInstances(e,n,a){var t=a[e];t.nrInstances=t.nrInstances+n}function allowDrop(e){e.preventDefault()}function dragDatabase(e){jQuery.event.props.push("dataTransfer");var n=createBasicDatabase(parseInt(DBSize.innerHTML));console.log(n);var a=JSON.stringify(n);e.dataTransfer.setData("foo",a)}function dragStorage(e){jQuery.event.props.push("dataTransfer");var n=createBasicStorage(parseInt(storageSize.innerHTML)),a=JSON.stringify(n);e.dataTransfer.setData("foo",a)}function dragVM(e){jQuery.event.props.push("dataTransfer");var n=createBasicVirtualMachine(parseInt(nrInstances.innerHTML),parseInt(days.innerHTML),parseInt(hours.innerHTML)),a=JSON.stringify(n);e.dataTransfer.setData("foo",a)}function drop(e){e.preventDefault();var n=JSON.parse(e.dataTransfer.getData("foo"));"VirtualMachine"===n.objectName&&addVirtualMachine(n),"Database"===n.objectName&&(console.log(n.objectName),addDatabase(n)),"Storage"===n.objectName&&(console.log(n.objectName),addStorage(n)),console.log(n)}function refresh(){for(var e in clearBox("items"),VirtualMachines){VirtualMachines[e];$("#items").append($('<div class="test"></div>').html('<img src="images/VM.png">')),console.log(e.hours)}}function clearBox(e){document.getElementById(e).innerHTML=""}function removeIcon(e){$(e).remove()}function calculate(){console.log("Calculate button pressed..","sending AJAX request to cloudwatch");$.ajax({type:"GET",url:"/cloudwatch",contentType:"html/text",data:{service:"google-cloud"},success:function(e){e}}).done(function(){console.log("Finished processing response of AJAX request to cloudwatch"),console.log("calculating price...");var e=[],n=0;for(var a in VirtualMachines)e.push(VirtualMachines[a].costMonthly()*VirtualMachines[a].nrInstances),n+=VirtualMachines[a].costMonthly()*VirtualMachines[a].nrInstances;var t="";for(var a in e)t=t+"\nVirtual machine "+a+"     "+Math.round(100*e[a])/100;alert(t+"\nTotal                          "+Math.round(100*n)/100)})}$(document).ready(function(){$("#myAccordion").accordion()}),$(function(){var e=document.getElementById("VMInstancesSliderID");(nrInstances=document.getElementById("VMInstances")).innerHTML=e.value,e.oninput=function(){nrInstances.innerHTML=this.value};var n=document.getElementById("VMDaysSliderID");(days=document.getElementById("VMDays")).innerHTML=n.value,n.oninput=function(){days.innerHTML=this.value};var a=document.getElementById("VMHoursSliderID");(hours=document.getElementById("VMHours")).innerHTML=a.value,a.oninput=function(){hours.innerHTML=this.value};var t=document.getElementById("StorageGBSliderID");(storageSize=document.getElementById("StorageGB")).innerHTML=t.value,t.oninput=function(){storageSize.innerHTML=this.value,console.log(storageSize)};var r=document.getElementById("DBGBSliderID");(DBSize=document.getElementById("DBGB")).innerHTML=r.value,r.oninput=function(){DBSize.innerHTML=this.value},(calculate=document.getElementById("calculate")).onclick=function(){var e=[],n=0;for(var a in VirtualMachines)e.push(VirtualMachines[a].costMonthly()*VirtualMachines[a].nrInstances),n+=VirtualMachines[a].costMonthly()*VirtualMachines[a].nrInstances;var t="";for(var a in e)t=t+"\nVirtual machine "+a+"     "+Math.round(100*e[a])/100;alert(t+"\nTotal                          "+Math.round(100*n)/100)}});